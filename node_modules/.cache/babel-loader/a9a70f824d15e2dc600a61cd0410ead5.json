{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport { noop, off, on } from './misc/util'; // const usePermission = <T extends PermissionDescriptor>(permissionDesc: T): IState => {\n\nvar usePermission = function usePermission(permissionDesc) {\n  var _a = useState(''),\n      state = _a[0],\n      setState = _a[1];\n\n  useEffect(function () {\n    var mounted = true;\n    var permissionStatus = null;\n\n    var onChange = function onChange() {\n      if (!mounted) {\n        return;\n      }\n\n      setState(function () {\n        var _a;\n\n        return (_a = permissionStatus === null || permissionStatus === void 0 ? void 0 : permissionStatus.state) !== null && _a !== void 0 ? _a : '';\n      });\n    };\n\n    navigator.permissions.query(permissionDesc).then(function (status) {\n      permissionStatus = status;\n      on(permissionStatus, 'change', onChange);\n      onChange();\n    }).catch(noop);\n    return function () {\n      permissionStatus && off(permissionStatus, 'change', onChange);\n      mounted = false;\n      permissionStatus = null;\n    };\n  }, [permissionDesc]);\n  return state;\n};\n\nexport default usePermission;","map":{"version":3,"sources":["/Users/wenhanzhang/Desktop/oa test/eog/wenhan-eog-react-assessment/node_modules/react-use/esm/usePermission.js"],"names":["useEffect","useState","noop","off","on","usePermission","permissionDesc","_a","state","setState","mounted","permissionStatus","onChange","navigator","permissions","query","then","status","catch"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,EAApB,QAA8B,aAA9B,C,CACA;;AACA,IAAIC,aAAa,GAAG,SAAhBA,aAAgB,CAAUC,cAAV,EAA0B;AAC1C,MAAIC,EAAE,GAAGN,QAAQ,CAAC,EAAD,CAAjB;AAAA,MAAuBO,KAAK,GAAGD,EAAE,CAAC,CAAD,CAAjC;AAAA,MAAsCE,QAAQ,GAAGF,EAAE,CAAC,CAAD,CAAnD;;AACAP,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAIU,OAAO,GAAG,IAAd;AACA,QAAIC,gBAAgB,GAAG,IAAvB;;AACA,QAAIC,QAAQ,GAAG,SAAXA,QAAW,GAAY;AACvB,UAAI,CAACF,OAAL,EAAc;AACV;AACH;;AACDD,MAAAA,QAAQ,CAAC,YAAY;AAAE,YAAIF,EAAJ;;AAAQ,eAAO,CAACA,EAAE,GAAGI,gBAAgB,KAAK,IAArB,IAA6BA,gBAAgB,KAAK,KAAK,CAAvD,GAA2D,KAAK,CAAhE,GAAoEA,gBAAgB,CAACH,KAA3F,MAAsG,IAAtG,IAA8GD,EAAE,KAAK,KAAK,CAA1H,GAA8HA,EAA9H,GAAmI,EAA1I;AAA+I,OAAtK,CAAR;AACH,KALD;;AAMAM,IAAAA,SAAS,CAACC,WAAV,CACKC,KADL,CACWT,cADX,EAEKU,IAFL,CAEU,UAAUC,MAAV,EAAkB;AACxBN,MAAAA,gBAAgB,GAAGM,MAAnB;AACAb,MAAAA,EAAE,CAACO,gBAAD,EAAmB,QAAnB,EAA6BC,QAA7B,CAAF;AACAA,MAAAA,QAAQ;AACX,KAND,EAOKM,KAPL,CAOWhB,IAPX;AAQA,WAAO,YAAY;AACfS,MAAAA,gBAAgB,IAAIR,GAAG,CAACQ,gBAAD,EAAmB,QAAnB,EAA6BC,QAA7B,CAAvB;AACAF,MAAAA,OAAO,GAAG,KAAV;AACAC,MAAAA,gBAAgB,GAAG,IAAnB;AACH,KAJD;AAKH,GAtBQ,EAsBN,CAACL,cAAD,CAtBM,CAAT;AAuBA,SAAOE,KAAP;AACH,CA1BD;;AA2BA,eAAeH,aAAf","sourcesContent":["import { useEffect, useState } from 'react';\nimport { noop, off, on } from './misc/util';\n// const usePermission = <T extends PermissionDescriptor>(permissionDesc: T): IState => {\nvar usePermission = function (permissionDesc) {\n    var _a = useState(''), state = _a[0], setState = _a[1];\n    useEffect(function () {\n        var mounted = true;\n        var permissionStatus = null;\n        var onChange = function () {\n            if (!mounted) {\n                return;\n            }\n            setState(function () { var _a; return (_a = permissionStatus === null || permissionStatus === void 0 ? void 0 : permissionStatus.state) !== null && _a !== void 0 ? _a : ''; });\n        };\n        navigator.permissions\n            .query(permissionDesc)\n            .then(function (status) {\n            permissionStatus = status;\n            on(permissionStatus, 'change', onChange);\n            onChange();\n        })\n            .catch(noop);\n        return function () {\n            permissionStatus && off(permissionStatus, 'change', onChange);\n            mounted = false;\n            permissionStatus = null;\n        };\n    }, [permissionDesc]);\n    return state;\n};\nexport default usePermission;\n"]},"metadata":{},"sourceType":"module"}