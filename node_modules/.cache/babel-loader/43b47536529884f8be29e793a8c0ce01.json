{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\nvar Status;\n\n(function (Status) {\n  Status[Status[\"init\"] = 0] = \"init\";\n  Status[Status[\"play\"] = 1] = \"play\";\n  Status[Status[\"pause\"] = 2] = \"pause\";\n  Status[Status[\"end\"] = 3] = \"end\";\n})(Status || (Status = {}));\n\nvar useSpeech = function useSpeech(text, options) {\n  var mounted = useRef(false);\n\n  var _a = useState(function () {\n    var _a = options.voice || {},\n        _b = _a.lang,\n        lang = _b === void 0 ? 'default' : _b,\n        _c = _a.name,\n        name = _c === void 0 ? '' : _c;\n\n    return {\n      isPlaying: false,\n      status: Status[Status.init],\n      lang: options.lang || 'default',\n      voiceInfo: {\n        lang: lang,\n        name: name\n      },\n      rate: options.rate || 1,\n      pitch: options.pitch || 1,\n      volume: options.volume || 1\n    };\n  }),\n      state = _a[0],\n      setState = _a[1];\n\n  var handlePlay = useCallback(function () {\n    if (!mounted.current) {\n      return;\n    }\n\n    setState(function (preState) {\n      return __assign(__assign({}, preState), {\n        isPlaying: true,\n        status: Status[Status.play]\n      });\n    });\n  }, []);\n  var handlePause = useCallback(function () {\n    if (!mounted.current) {\n      return;\n    }\n\n    setState(function (preState) {\n      return __assign(__assign({}, preState), {\n        isPlaying: false,\n        status: Status[Status.pause]\n      });\n    });\n  }, []);\n  var handleEnd = useCallback(function () {\n    if (!mounted.current) {\n      return;\n    }\n\n    setState(function (preState) {\n      return __assign(__assign({}, preState), {\n        isPlaying: false,\n        status: Status[Status.end]\n      });\n    });\n  }, []);\n  useEffect(function () {\n    mounted.current = true;\n    var utterance = new SpeechSynthesisUtterance(text);\n    options.lang && (utterance.lang = options.lang);\n    options.voice && (utterance.voice = options.voice);\n    utterance.rate = options.rate || 1;\n    utterance.pitch = options.pitch || 1;\n    utterance.volume = options.volume || 1;\n    utterance.onstart = handlePlay;\n    utterance.onpause = handlePause;\n    utterance.onresume = handlePlay;\n    utterance.onend = handleEnd;\n    window.speechSynthesis.speak(utterance);\n    return function () {\n      mounted.current = false;\n    };\n  }, []);\n  return state;\n};\n\nexport default useSpeech;","map":{"version":3,"sources":["/Users/wenhanzhang/Desktop/oa test/eog/wenhan-eog-react-assessment/node_modules/react-use/esm/useSpeech.js"],"names":["__assign","useCallback","useEffect","useRef","useState","Status","useSpeech","text","options","mounted","_a","voice","_b","lang","_c","name","isPlaying","status","init","voiceInfo","rate","pitch","volume","state","setState","handlePlay","current","preState","play","handlePause","pause","handleEnd","end","utterance","SpeechSynthesisUtterance","onstart","onpause","onresume","onend","window","speechSynthesis","speak"],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\nvar Status;\n(function (Status) {\n    Status[Status[\"init\"] = 0] = \"init\";\n    Status[Status[\"play\"] = 1] = \"play\";\n    Status[Status[\"pause\"] = 2] = \"pause\";\n    Status[Status[\"end\"] = 3] = \"end\";\n})(Status || (Status = {}));\nvar useSpeech = function (text, options) {\n    var mounted = useRef(false);\n    var _a = useState(function () {\n        var _a = options.voice || {}, _b = _a.lang, lang = _b === void 0 ? 'default' : _b, _c = _a.name, name = _c === void 0 ? '' : _c;\n        return {\n            isPlaying: false,\n            status: Status[Status.init],\n            lang: options.lang || 'default',\n            voiceInfo: { lang: lang, name: name },\n            rate: options.rate || 1,\n            pitch: options.pitch || 1,\n            volume: options.volume || 1,\n        };\n    }), state = _a[0], setState = _a[1];\n    var handlePlay = useCallback(function () {\n        if (!mounted.current) {\n            return;\n        }\n        setState(function (preState) {\n            return __assign(__assign({}, preState), { isPlaying: true, status: Status[Status.play] });\n        });\n    }, []);\n    var handlePause = useCallback(function () {\n        if (!mounted.current) {\n            return;\n        }\n        setState(function (preState) {\n            return __assign(__assign({}, preState), { isPlaying: false, status: Status[Status.pause] });\n        });\n    }, []);\n    var handleEnd = useCallback(function () {\n        if (!mounted.current) {\n            return;\n        }\n        setState(function (preState) {\n            return __assign(__assign({}, preState), { isPlaying: false, status: Status[Status.end] });\n        });\n    }, []);\n    useEffect(function () {\n        mounted.current = true;\n        var utterance = new SpeechSynthesisUtterance(text);\n        options.lang && (utterance.lang = options.lang);\n        options.voice && (utterance.voice = options.voice);\n        utterance.rate = options.rate || 1;\n        utterance.pitch = options.pitch || 1;\n        utterance.volume = options.volume || 1;\n        utterance.onstart = handlePlay;\n        utterance.onpause = handlePause;\n        utterance.onresume = handlePlay;\n        utterance.onend = handleEnd;\n        window.speechSynthesis.speak(utterance);\n        return function () {\n            mounted.current = false;\n        };\n    }, []);\n    return state;\n};\nexport default useSpeech;\n"]},"metadata":{},"sourceType":"module"}