var e=require("@urql/core"),t=require("react"),n=require("wonka"),r=e.createClient({url:"/graphql"}),u=t.createContext(r),o=u.Provider,a=u.Consumer,c=function(){return t.useContext(u)};function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0,operation:void 0};function f(r){var u=t.useRef(!0),o=c(),a=t.useState(s),f=a[0],l=a[1];function p(e){return u.current&&l({fetching:!1,stale:!!e.stale,data:e.data,error:e.error,extensions:e.extensions,operation:e.operation}),e}var v=t.useCallback((function(t,u){return l(i({},s,{fetching:!0})),n.toPromise(o.executeMutation(e.createRequest(r,t),u||{})).then(p)}),[o,r,l]);function x(){u.current=!1}return t.useEffect((function(){return x}),[]),[f,v]}var l=!1;function p(){return l}function v(e,r){function u(){return e}var o=t.useMemo((function(){var t=n.makeSubject();return[n.concat([n.map(u)(n.fromValue(e)),t.source]),function(n){var r=e;try{n!==r&&t.next(e=n)}catch(t){throw e=r,t}}]}),[]),a=o[0],c=o[1],i=t.useState((function(){var e;l=!0;try{n.subscribe((function(t){e=t}))(n.takeWhile(p)(r(a))).unsubscribe()}finally{l=!1}return e})),s=i[0],f=i[1];function v(e){l||f((function(t){return function(e,t){if("object"!=typeof e||"object"!=typeof t)return e!==t;for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}(t,e)?e:t}))}return t.useEffect((function(){return n.subscribe(v)(r(a,s)).unsubscribe}),[a]),[s,c]}function x(n,r){var u=t.useRef(void 0);return t.useMemo((function(){var t=e.createRequest(n,r);return void 0!==u.current&&u.current.key===t.key?u.current:(u.current=t,t)}),[n,r])}function d(e){return void 0!==e}var h=function(e,t){return e.suspense&&(!t||!1!==t.suspense)},b=new Map;function y(e,t){return i({},e,t)}function m(e){return{fetching:!1,stale:!!e.stale,data:e.data,error:e.error,operation:e.operation,extensions:e.extensions}}function k(e){return e?n.concat([n.fromValue({fetching:!0,stale:!1}),n.map(m)(e),n.fromValue({fetching:!1,stale:!1})]):n.fromValue({fetching:!1,stale:!1})}function g(e,t){return n.scan(y,t||s)(n.switchMap(k)(e))}function C(e){var r=c(),u=x(e.query,e.variables),o=t.useCallback((function(t){var o=h(r,e.context),a=o?b.get(u.key):void 0;return a||(a=r.executeQuery(u,i({},{requestPolicy:e.requestPolicy,pollInterval:e.pollInterval},e.context,t)),o&&(a=function(e){var t,r,u=n.share(e);function o(e){r&&void 0===t&&r(e),t=e}function a(e){r=e}return n.concat([n.filter(d)(n.map((function(){return t}))(n.fromValue(t))),function(e){if(n.onPush(o)(u)(e),void 0===t)throw new Promise(a)}])}(a),"undefined"!=typeof window&&b.set(u.key,a))),a}),[r,u,e.requestPolicy,e.pollInterval,e.context]),a=t.useMemo((function(){return e.pause?null:o()}),[e.pause,o]),s=v(a,t.useCallback(g,[])),f=s[0],l=s[1],p=t.useCallback((function(e){l(o(i({},{suspense:!1},e)))}),[l,o]);return t.useEffect((function(){b.delete(u.key),h(r,e.context)||l(a)}),[l,r,a,u,e.context]),h(r,e.context)&&l(a),[f,p]}function q(e){return{fetching:!0,stale:!!e.stale,data:e.data,error:e.error,extensions:e.extensions,operation:e.operation}}function M(e){return e?n.concat([n.fromValue({fetching:!0,stale:!1}),n.map(q)(e),n.fromValue({fetching:!1,stale:!1})]):n.fromValue({fetching:!1})}function w(e,r){var u=c(),o=t.useRef(r);o.current=r;var a=x(e.query,e.variables),f=t.useCallback((function(t){return u.executeSubscription(a,i({},e.context,t))}),[u,a,e.context]),l=t.useMemo((function(){return e.pause?null:f()}),[e.pause,f]);function p(e,t){var n=o.current;return i({},e,t,{data:void 0!==t.data?"function"==typeof n?n(e.data,t.data):t.data:e.data})}var d=v(l,t.useCallback((function(e,t){return n.scan(p,t||s)(n.switchMap(M)(e))}),[])),h=d[0],b=d[1],y=t.useCallback((function(e){return b(f(e))}),[b,f]);return t.useEffect((function(){b(l)}),[b,l]),[h,y]}Object.keys(e).forEach((function(t){"default"!==t&&(exports[t]=e[t])})),exports.Consumer=a,exports.Context=u,exports.Mutation=function(e){var t=f(e.query);return e.children(i({},t[0],{executeMutation:t[1]}))},exports.Provider=o,exports.Query=function(e){var t=C(e);return e.children(i({},t[0],{executeQuery:t[1]}))},exports.Subscription=function(e){var t=w(e,e.handler);return e.children(i({},t[0],{executeSubscription:t[1]}))},exports.useClient=c,exports.useMutation=f,exports.useQuery=C,exports.useSubscription=w;
//# sourceMappingURL=urql.min.js.map
